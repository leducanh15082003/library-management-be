<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{_layout-admin}">
<head>
    <meta charset="UTF-8">
    <title>Trả tài liệu</title>
</head>
<body>
<div layout:fragment="content">
    <div class="px-6 py-4">
        <!-- Banner -->
        <div class="relative">
            <img src="https://res.cloudinary.com/dlqpdl4mz/image/upload/v1742976412/banner_library.jpg" alt="Banner" class="w-full h-64 object-cover rounded-md">
            <h1 class="absolute bottom-5 left-5 text-white text-4xl font-bold drop-shadow-lg">TRẢ TÀI LIỆU</h1>
        </div>

        <!-- Search -->
        <form method="get" th:action="@{/manage-borrow/return}" class="flex items-center justify-center gap-3 mt-8">
            <input type="text" name="studentId" placeholder="Mã sinh viên"
                   class="border border-[#427B49] rounded-md px-4 py-2 w-80 outline-none focus:ring focus:ring-[#A4CB37]" />
            <button type="submit"
                    class="bg-[#A4CB37] text-white px-5 py-2 rounded-md hover:bg-[#8DB52F]">Tìm kiếm</button>
        </form>

        <!-- Table -->
        <div class="overflow-x-auto mt-8">
            <table class="w-full border border-gray-400 text-center">
                <thead class="bg-[#E6EFE6] text-[#427B49] font-bold">
                <tr>
                    <th class="border border-gray-400 px-2 py-2">STT</th>
                    <th class="border border-gray-400 px-2 py-2">Mã sinh viên</th>
                    <th class="border border-gray-400 px-2 py-2">Mã vạch</th>
                    <th class="border border-gray-400 px-2 py-2">Nhan đề</th>
                    <th class="border border-gray-400 px-2 py-2">Ngày mượn</th>
                    <th class="border border-gray-400 px-2 py-2">Xác nhận đã trả sách</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="record, iterStat : ${records}">
                    <td class="border px-2 py-2" th:text="${iterStat.count}">1</td>
                    <td class="border px-2 py-2" th:text="${record.studentId}">2101040111</td>
                    <td class="border px-2 py-2" th:text="${record.barcode}">000139631</td>
                    <td class="border px-2 py-2" th:text="${record.title}">Tên sách</td>
                    <td class="border px-2 py-2" th:text="${#temporals.format(record.borrowDate, 'dd-MM-yy HH:mm')}">18-02-25 14:23</td>
                    <td class="border px-2 py-2">
                        <form th:action="@{/manage-borrow/return}" method="post">
                            <input type="hidden" name="recordId" th:value="${record.id}" />
                            <button type="submit" class="text-[#427B49] font-semibold hover:underline">Xác nhận</button>
                        </form>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(records)}">
                    <td colspan="6" class="py-4 text-gray-500">Không tìm thấy bản ghi mượn tài liệu nào.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
